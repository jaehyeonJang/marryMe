<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>소원 트리</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
    }

    .track {
      width: 100%;
      height: 100vh;
      transition: transform 0.7s ease;
    }

    .page {
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      padding: 2rem;
    }

    .page h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .page p {
      max-width: 800px;
      font-size: 1.2rem;
      line-height: 1.8;
      margin: 0 auto;
    }

    .page.content {
      align-items: flex-start;
      justify-content: flex-start;
      padding: 5vh 10vw;
      position: relative;
    }

    .scroll-content {
      width: 100%;
      overflow-y: auto;
      flex: 1;
      max-height: calc(100vh - 5rem); /* 제목 공간 제외 */
      padding-right: 1rem;
    }

    .scroll-content p {
      text-align: left;
      white-space: pre-wrap;
    }

    /* 인디케이터 */
    .indicator {
      position: fixed;
      top: 50%;
      right: 30px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #fff;
      background: transparent;
      transition: background 0.3s;
    }

    .dot.active {
      background: #fff;
    }
  </style>
</head>
<body>

  <!-- ✅ 트랙: 페이지 래핑 -->
  <div class="track">

    <!-- ✅ 1페이지: 제목 -->
    <div class="page">
      <h1>소원 트리</h1>
      <p>기억은 원래 그 사람의 것이었지만,<br>더 이상 그 사람만의 것은 아닌 세상이 되었다.</p>
    </div>

    <!-- ✅ 2페이지: 작가의 말 -->
    <div class="page">
      <h1>작가의 말</h1>
      <p>이 이야기는 잊히지 못한 사람을 향한 작은 소원입니다.<br>이 페이지를 통해 누군가의 기억이 다시 이어지길 바랍니다.</p>
    </div>

    <!-- ✅ 3페이지: 본문 + 내부 스크롤 -->
    <div class="page content">
      <h1>소설 본문</h1>
      <div class="scroll-content">
        <p>
5... 4... 3... 2... 1... 엔진 점화.
테슬라의 우주 산업 부문인 SpaceX가 화성 유인 탐사를 시작한 지도 벌써 6년.
AI 기술의 발전은 인류의 생활을 순식간에 바꿔놓았다.
수많은 직업이 사라졌고, 새로운 질서가 생겨났다.
그러나 그 모든 변화 중에서도 가장 예상치 못했던 건,
바로 ‘DreamX’의 등장이다.

📺 [뉴스 앵커 목소리]

“이번 주, DreamX 경매에 K-POP 스타 G-Dragon의
첫 콘서트 기억이 등록되며 수많은 팬들의 관심이 몰리고 있습니다—”

DreamX는 트라우마 치료를 위한 의료 스타트업이었다.
‘기억은 뇌의 어디에서, 어떻게 저장되는가’라는 질문에서 출발해
기억을 추출하고 삭제하고 주입하는 기술을 세계 최초로 구현해냈다.

하지만 기술은 곧 자본에 잠식되고 만다.
DreamX는 전 세계에서 가장 이윤 높은 감각 체험 산업으로 변모했다.

기억을 판다는 건, 곧 경험을 판다는 의미였다.
스위스의 절벽에서 패러글라이딩을 했던 짜릿한 순간.
이집트 피라미드를 손끝으로 쓸어내릴 때의 건조한 촉감.
바닷속에서 상어가 스쳐 지나간 그 오싹한 숨소리까지—

이제 돈만 있다면, 병원에서 잠시 누운 채
그 모든 ‘경험’을 마치 자신의 기억처럼 가져갈 수 있었다.

기억은 가장 고급스러운 소비재가 되었고,
가장 아름답거나, 가장 힘들게 얻은 기억일수록 높은 가격에 거래됐다.

그렇게 만들어진 기억 시장에서
누군가는 생존을 위해 기억을 팔았고,
누군가는 소유하기 위해 기억을 샀다.

기억은 원래 그 사람의 것이었지만,
더 이상 그 사람만의 것은 아닌 세상이 되었다.

하지만 그런 변화 속에서도
일부 소수의 사람들만 기술의 혜택을 누릴 뿐 대다수의 사람들은
누군가의 기억을 살 생각을 하지도 못한 채 각자의 시간에 충실하는데 바빴다

여기는 마곡의 어느 한 사무실,
"네, 장재현입니다.
네... 아 내용은 미리 전달받아서 알고는 있는데 제가 지금 미팅중이라서요.
메일로 한번 더 주시면 회신 드리겠습니다.
네, 수고하세요"

많은 전화가 쏟아지고, 해야 할 일들이 밀려왔다.
모니터엔 알림창이 쉴 새 없이 떴고, 커피는 벌써 식어 있었다.

        </p>
      </div>
    </div>

  </div>

  <!-- ✅ 인디케이터 -->
  <div class="indicator"></div>

  <script>
    const track = document.querySelector('.track');
    const pages = document.querySelectorAll('.page');
    const indicator = document.querySelector('.indicator');
    const scrollContent = document.querySelector('.scroll-content');
    let currentPage = 0;

    pages.forEach((_, i) => {
      const dot = document.createElement('div');
      dot.classList.add('dot');
      if (i === currentPage) dot.classList.add('active');
      indicator.appendChild(dot);
    });

    const dots = document.querySelectorAll('.dot');

    function updateIndicator() {
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentPage);
      });
    }

    function showPage(index) {
      currentPage = Math.round(index);
      track.style.transform = `translateY(-${100 * currentPage}vh)`;
      updateIndicator();
    }

    function nextPage() {
      if (currentPage === pages.length - 1) return; // 마지막 페이지는 내부 스크롤
      currentPage++;
      showPage(currentPage);
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage--;
        showPage(currentPage);
      }
    }

    showPage(currentPage);

    let isScrolling = false;

    window.addEventListener('wheel', e => {
      if (isScrolling) return;

      // 마지막 페이지라면 내부 스크롤 우선 허용
      if (currentPage === pages.length - 1) return;

      isScrolling = true;

      if (e.deltaY > 0) {
        nextPage();
      } else {
        prevPage();
      }

      currentPage = Math.round(currentPage);

      setTimeout(() => {
        isScrolling = false;
      }, 800);
    });

    window.addEventListener('keydown', e => {
      if (isScrolling) return;

      if (currentPage === pages.length - 1) return;

      isScrolling = true;

      if (e.key === 'ArrowDown') {
        nextPage();
      } else if (e.key === 'ArrowUp') {
        prevPage();
      }

      currentPage = Math.round(currentPage);

      setTimeout(() => {
        isScrolling = false;
      }, 800);
    });

    // 모바일 스와이프
    let touchStartY = 0;
    let touchEndY = 0;

    window.addEventListener('touchstart', e => {
      touchStartY = e.changedTouches[0].screenY;
    }, false);

    window.addEventListener('touchend', e => {
      touchEndY = e.changedTouches[0].screenY;
      handleGesture();
    }, false);

    function handleGesture() {
      if (isScrolling) return;

      if (currentPage === pages.length - 1) return; // 마지막 페이지는 내부 스크롤만

      isScrolling = true;

      if (touchStartY - touchEndY > 50) {
        nextPage();
      } else if (touchEndY - touchStartY > 50) {
        prevPage();
      }

      currentPage = Math.round(currentPage);

      setTimeout(() => {
        isScrolling = false;
      }, 800);
    }
  </script>
</body>
</html>
