<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>소원 트리</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
    }

    .page {
      width: 100%;
      height: 100vh;
      min-height: 100vh; /* collapse 방지 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      padding: 2rem;
      transition: transform 0.7s ease;
    }

    .page h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .page p {
      max-width: 800px;
      font-size: 1.2rem;
      line-height: 1.8;
      margin: 0 auto;
    }

    .page.content {
      align-items: flex-start;
      justify-content: flex-start;
      padding: 5vh 10vw;
    }

    .page.content p {
      text-align: left;
    }

    /* 인디케이터 */
    .indicator {
      position: fixed;
      top: 50%;
      right: 30px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #fff;
      background: transparent;
      transition: background 0.3s;
    }

    .dot.active {
      background: #fff;
    }
  </style>
</head>
<body>

  <!-- ✅ 첫 페이지: 제목 -->
  <div class="page">
    <h1>소원 트리</h1>
    <p>기억은 원래 그 사람의 것이었지만, 더 이상 그 사람만의 것은 아닌 세상이 되었다.</p>
  </div>

  <!-- ✅ 두 번째 페이지: 작가의 말 -->
  <div class="page">
    <h1>작가의 말</h1>
    <p>이 이야기는 잊히지 못한 사람을 향한 작은 소원입니다. 이 페이지를 통해 누군가의 기억이 다시 이어지길 바랍니다.</p>
  </div>

  <!-- ✅ 세 번째 페이지: 본문 -->
  <div class="page content">
    <h1>소설 본문</h1>
    <p>많은 것들이 바뀌는 시기에도 결국 세상을 구성하는 다수는 평범한 사람들이었다...</p>
  </div>

</body>

  <!-- 인디케이터 -->
  <div class="indicator"></div>

  <script>
    const pages = document.querySelectorAll('.page');
    const indicator = document.querySelector('.indicator');
    let currentPage = 0;

    // 인디케이터 dot 생성
    pages.forEach((_, i) => {
      const dot = document.createElement('div');
      dot.classList.add('dot');
      if (i === currentPage) dot.classList.add('active');
      indicator.appendChild(dot);
    });

    const dots = document.querySelectorAll('.dot');

    function updateIndicator() {
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentPage);
      });
    }

    function showPage(index) {
      // 항상 정수로 강제
      currentPage = Math.round(index);
      pages.forEach((page, i) => {
        page.style.transform = `translateY(${100 * (i - currentPage)}vh)`;
      });
      updateIndicator();
    }

    function nextPage() {
      if (currentPage < pages.length - 1) {
        currentPage++;
        showPage(currentPage);
      }
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage--;
        showPage(currentPage);
      }
    }

    showPage(currentPage);

    let isScrolling = false;

    window.addEventListener('wheel', e => {
      if (isScrolling) return;

      isScrolling = true;

      if (e.deltaY > 0) {
        nextPage();
      } else {
        prevPage();
      }

      // 락 해제 전에도 currentPage는 정수!
      currentPage = Math.round(currentPage);

      setTimeout(() => {
        isScrolling = false;
      }, 800);
    });

    window.addEventListener('keydown', e => {
      if (isScrolling) return;

      isScrolling = true;

      if (e.key === 'ArrowDown') {
        nextPage();
      } else if (e.key === 'ArrowUp') {
        prevPage();
      }

      currentPage = Math.round(currentPage);

      setTimeout(() => {
        isScrolling = false;
      }, 800);
    });
  </script>
</html>
